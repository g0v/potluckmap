<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>Potluckmap by g0v</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">Potluckmap</h1>
      <h2 class="project-tagline">各自分工建立簡單的
geojson/gpx/csv 文字網頁， 然後在 potluckmap
頁面填上網址一網打盡， 合力製作出混搭地圖。</h2>
      <a href="https://github.com/g0v/potluckmap" class="btn">View on GitHub</a>
      <a href="https://github.com/g0v/potluckmap/zipball/gh-pages" class="btn">Download .zip</a>
      <a href="https://github.com/g0v/potluckmap/tarball/gh-pages" class="btn">Download .tar.gz</a>
    </section>

    <section class="main-content">
      <h1>
<a id="potluckmap-bring-your-data-to-the-collaborative-map" class="anchor" href="#potluckmap-bring-your-data-to-the-collaborative-map" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Potluckmap: 把你的資料帶來跟我們一起製作一張協作地圖吧!</h1>

<h2>
<a id="what-can-potluckmap-do-for-you" class="anchor" href="#what-can-potluckmap-do-for-you" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Potluckmap 能幫你做什麼?</h2>

<p>Potluckmap 可以把你的 (還有合併他人的)
文字版地理資訊呈現在 OpenStreetMap 上面。
它以 javascript 語言撰寫， 具有以下特性：

<p align="center"><img src="potluckmap.jpg"
alt="screenshot of potluckmap" /></p>

<ol>
<li>你可以指定好幾個資料來源， 它會把這些來源合併顯示在一張地圖上。
<li>因為底層採用 <a href="https://github.com/mapbox/leaflet-omnivore">
leaflet-omnivore</a> 函式庫， 所以資料來源可以是
.geojson, .gpx, .csv 等等格式。 此外， 也接受
OverpassTurbo 所匯出的資料格式。
<li>資料來源可以設定每隔多久更新一次。
<li>每個 marker 可以轉到不同的角度 --
由資料裡面某欄位值， 套到數學運算式而決定。
<li>如果你在本地主機架設好 tile server，
而且只採用本地的資料來源， 那麼它可以完全離線運作。
</ol>

<p>因為 (1) 跟 (2)， 所以 potluckmap 很適用於眾多單位
(例如不同政府部門) 之間的合作。
每個單位可以專注於生產/更新它所關心的地理資訊 --
用簡單的文字格式呈現就好。
這可以實現 「地理資訊與圖片呈現分開處理」 的效果，
也就是類似文書處理領域或網頁領域 (html+ css) 的
「內容與外觀分開處理」 的效果。

<p>因為 (3) 跟 (4)， 所以 potluckmap 很適用於呈現交通工具
(公車/汽車/腳踏車) 的動態。
全球大大小小都市的市政府不再需要自己設計公車動態程式，
只需要把把公車動態資訊用上述任何一種文字格式的檔案張貼出來即可。
開發者可以合作開發同一個公車動態 app。
更有可能發生的是： 未來將會有很多彼此相容而競爭的 apps，
每一個都適用於所有都市。
每一位遊客可以選用他自己偏好的 app，
不論旅行到地球上的哪個都市， 都可以用同樣那一個 app 來查詢。

<p>Privacy-conscious users and users who need to use maps offline
will find (5) particularly appealing.</p>

<p>(5) 對於關心隱私或是需要離線看地圖的朋友而言特別有用。

<h2>
<a id="trying-out-potluckmap-online-without-installing-it" class="anchor" href="#trying-out-potluckmap-online-without-installing-it" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Demo</h2>

<p>以下以 iframe 呈現 demo 地圖。 你也可以直接前往
<a href="m/cyut-bus/">demo 地圖的獨立頁面</a>。
另幾個 (位於別站的) 範例是：
<a href="https://frdm.cyut.edu.tw/~ckhung/saas/potluckmap/m/cyut-bus/">
朝陽科大公車動態地圖</a>、 <a href=
<a href="https://frdm.cyut.edu.tw/~ckhung/saas/potluckmap/m/tw-univ/">
臺灣部分大學校園範圍及重心地圖</a>、 <a href=
"https://frdm.cyut.edu.tw/~ckhung/saas/potluckmap/m/big-conv/">
臺灣特大號超商旅遊地圖</a>。
<p class="center"><iframe src="m/cyut-bus/"
width="98%" height="600"></iframe></p>

<h2>
<a id="trying-out-potluckmap-online-without-installing-it" class="anchor" href="#trying-out-potluckmap-online-without-installing-it" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>
不必安裝， 馬上線上試用</h2>

<p>直接前往 <a href=
"http://g0v.github.io/potluckmap/m/cyut-bus/">
demo 地圖</a> 馬上開始玩， 例如把 「sources」 表格裡的任何 url
欄位換成你自己的地理資訊檔的 url。
下文有詳述如何儲存與恢復你所做的設定。

<h2>
<a id="installing-potluckmap" class="anchor" href="#installing-potluckmap" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installing Potluckmap</h2>

<p>Just download potluckmap and open one of the index.html files in m/*/ in firefox.
You may need to <a href="https://gist.github.com/vgk77/9ded159bd982bd780351ae0c3a942ccf">disable local cors in firefox</a>.</p>

<p>Chrome or chromium users who want to use local data sources
have two options. Either install a local web server and
access one of the index.html files through the web server,
or start the browser from the command line:
<code>chromium-browser --allow-file-access-from-files</code>.
Please see <a href="https://github.com/ckhung/javascriptCanReadLocalFiles">javascriptCanReadLocalFiles</a> for details.</p>

<p>It is possible to share one copy of the codes among
several web pages each of which needs its own map.
Just append "?config=xyz.json" to the html page's url
and potluckmap.js will use xyz.json as the configuration file.

<p>If you want to run potluckmap offline, you need to have
a local tile server.

<h2>
<a id="basic-setup" class="anchor" href="#basic-setup" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Basic Setup</h2>

<p>Potluckmap does not have a fancy user interface (yet).
You have to edit its configuration file config.json manually.
[2016/11/09: <em>configuration file format changed!</em>
The new config file now only contains a small structure
that corrospends to the "startval" portion of the old config file.]
You can edit the following fields
in the configuration file:</p>

<ol>
<li>"title": the title of your map.</li>
<li>"sources": the data sources of your map.</li>
<li>"views": a list of frequently used views as defined
by their names, zoom levels, and geographic coordinates.</li>
</ol>

<p>More details in later sections.</p>

<h2>
<a id="using-potluckmap" class="anchor" href="#using-potluckmap" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Using Potluckmap</h2>

<p>In the bottom left corner there are a few menu buttons.</p>

<p>The "pushpin" menu button include options for you to:</p>

<ol>
<li>[some place name] switch to a predefined view</li>
<li>[remember here] replace the current view with
what you are looking at right now</li>
</ol>

<p>The "reload" menu button include options for you to:
<ol>
<li>[reload all] reload all data sources
<li>[reload changed] reload those data sources
that have been manually changed in the configuration area
<li>[rebuild menu] rebuild the pushpin menu after you
manually add entries to, delete entries from,
or change the names of the views list in the configuration area.
</ol>

<h2>
<a id="saving-and-restoring-your-configuration" class="anchor" href="#saving-and-restoring-your-configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Saving and Restoring Your Configuration</h2>

<p>Below the map is the configuration area.
Potluckmap uses <a href="https://github.com/jdorn/json-editor">json-editor</a>
as a lazy programmer's user interface --
options that don't yet have a normal UI can be changed here.
For example, you can add views, delete views,
change the view name here.
However, changes may not go into effect immediately.
That's why there are menu items like [reload changed]
and [rebuild menu] in the map UI.</p>

<p>After you have configured your sources and views,
you may want to save it.
Press the [Edit JSON] button, copy the content,
and (using a text editor) save it as your new config.json file.
(Note: the [save] button does not save anything to the disk.
It only confirms your manual editing within this session.)
Potluckmap will then use your new configuration the next time it is run.</p>

<p>If you are visiting <a href=
"http://g0v.github.io/potluckmap/m/cyut-bus/">
the demo page</a>, then of course it is always
the demo map that gets displayed upon opening the page.
You can still ask it to display your own map
as long as your data files have a public url.
Simply press the [Edit JSON] button, and paste 
your config.json file into the edit window.
Then choose "reload all" from the map.

<p>Beware that the configuration file may undergo
changes as potluckmap is being actively developed.
Your old configuration file may not always work with
a newer version.

<h2>
<a id="more-details-about-the-configuration-options" class="anchor" href="#more-details-about-the-configuration-options" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>More Details About the Configuration Options</h2>

<h3>Sources</h3>

<p>You can specify the <code>format</code> and the <code>url</code> of each data source.
Leaving the format field empty instructs potluckmap to
choose the format parser according to the file name extension of the url.

<p>Features of type "Point" are styled using the these fields
<code>shap</code>, <code>glyph_set</code>, <code>glyph</code>,
and optionally <code>facing</code>.
The available set of <code>shape</code>s can be previewed at <a href=
"https://github.com/g0v/potluckmap/blob/gh-pages/lib/icons.png">
icons.png</a> .
Leaving the <code>glyph_set</code> empty,
you can type any short text in the <code>glyph</code> field
as the label for markers.
Alternatively, choosing glyphicon as the <code>glyph_set</code>,
you can type the name of one of the <a href=
"http://getbootstrap.com/components/">
bootstrap glyphicons</a> in the <code>glyph</code> field.
Additionally, the <code>facing</code> field may contain
a valid mathematical expression containing one or more
numerical fields from the source data file.
In this case, the icon is rotated by this amount of angle (in degrees).

<p>Features of type "LineString" are styled
using the <code>style</code> field. See <a href="https://frdm.cyut.edu.tw/~ckhung/saas/potluckmap/m/cyut-bus/">
cyut bus</a> for example.
The json editor for "style" is hidden by default.
To enable user editing, change <code>"hidden": true</code>
to <code>"hidden": false</code> in the entry
corresponding to "style" in schema.json .
(But it looks awkward.)

<p>The <code>refresh</code> field is the number of seconds
for automatically refreshing this source.
However, it must be greater than or equal to 20.

<p>See <a href=
"https://github.com/ckhung/Leaflet.Icon.Glyph">
Leaflet.Icon.Glyph</a> for more details about <code>shape</code>
and <code>glyph</code>.

<h3>Tile Provider</h3>

<p>This option employs the <a href=
"https://github.com/leaflet-extras/leaflet-providers">
leaflet-providers</a> project.
Visit <a href="https://leaflet-extras.github.io/leaflet-providers/preview/">
their demo</a> to see what each tile provider looks like.

<!-- h2>
<a id="known-bugs-and-to-do-list" class="anchor" href="#known-bugs-and-to-do-list" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Known Bugs and To Do List</h2 -->

      <footer class="site-footer">
        <span class="site-footer-owner"><a href="https://github.com/g0v/potluckmap">Potluckmap</a> is sponsored by Taiwan's Ministry of Science and Technology, project ID MOST-104-2221-E-492-013 and MOST-105-2221-E-492-025, and maintained by <a href="https://github.com/g0v">g0v</a>.
[<a href="index.html">English</a>]</span>

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  </body>
</html>
